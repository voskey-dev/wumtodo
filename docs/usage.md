# wumtodo 使い方ガイド

## 概要
wumtodoは、Discordと連携したチーム向けタスク管理アプリケーションです。Discordのスラッシュコマンドを使ってタスクを管理したり、Webインターフェースで詳細な管理を行うことができます。

## 初めての使い方

### 1. アカウントの作成とログイン
1. [wumtodo](https://wumtodo.example.com)にアクセス
2. 「Discordでログイン」ボタンをクリック
3. Discordの認証画面で「認証」をクリック
4. 自動的にwumtodoにリダイレクトされ、ログイン完了

### 2. チームの作成・参加

#### 新規チームの作成
1. Discordサーバーの管理者が[wumtodo Bot](https://discord.com/api/oauth2/authorize?client_id=YOUR_APPLICATION_ID&permissions=2147483648&scope=bot%20applications.commands)をサーバーに追加
2. サーバー管理者が `/wumtodo setup` コマンドを実行
3. チームが自動的に作成され、コマンド実行者が管理者に設定されます

#### 既存チームへの参加
1. Discord OAuthでwumtodoにログイン
2. Botが追加されたサーバーで任意のタスクコマンドを実行
3. 自動的にチームメンバーとして登録されます

## Discord スラッシュコマンド

### `/wumtodo setup` - 初期設定（管理者のみ）
```
/wumtodo setup
```
Botをサーバーに追加後、最初に実行するコマンドです。チームを作成し、実行者を管理者として設定します。

### `/task create` - 新規タスクの作成
```
/task create title:バグ修正 description:ログイン画面のバグを修正する priority:high
```
- **title** (必須): タスクのタイトル
- **description** (任意): タスクの詳細説明
- **priority** (任意): 優先度（high/medium/low）デフォルトはmedium

### `/task list` - タスク一覧の表示
```
/task list status:todo assignee:me
```
- **status** (任意): フィルタリング（todo/in_progress/completed）
- **assignee** (任意): 担当者でフィルタリング（me/unassigned/@ユーザー名）

### `/task status` - ステータスの変更
```
/task status id:TASK001 status:in_progress
```
- **id** (必須): タスクID
- **status** (必須): 新しいステータス（todo/in_progress/completed）

### `/task assign` - 担当者の割り当て
```
/task assign id:TASK001 user:@username
```
- **id** (必須): タスクID
- **user** (必須): 担当者（@ユーザー名またはunassignedで未割当）

### `/task due` - 期限の設定
```
/task due id:TASK001 date:2024-12-31
```
- **id** (必須): タスクID
- **date** (必須): 期限日（YYYY-MM-DD形式）

### `/task close` - タスクの完了
```
/task close id:TASK001
```
- **id** (必須): タスクID

**注意**: タスクを完了すると、関連するDiscordスレッドが自動的にアーカイブ（閉じられる）されます。これにより、完了したタスクのスレッドがチャンネルを散らかさないようになります。

### `/task comment` - コメントの追加
```
/task comment id:TASK001 content:このバグは再現しませんでした
```
- **id** (必須): タスクID
- **content** (必須): コメント内容

## Web インターフェース

### タスク一覧ページ（/tasks）
- すべてのタスクを一覧表示
- フィルタリング機能
  - ステータス（未着手/進行中/完了）
  - 優先度（高/中/低）
  - 担当者（自分/未割当）
- ソート機能
  - 作成日時
  - 期限日
  - 優先度
  - ステータス
- ページネーション（10件ずつ表示）

### タスク詳細ページ（/tasks/[id]）
- タスクの詳細情報表示
- インライン編集
  - タイトル
  - 説明
  - ステータス
  - 優先度
- コメント機能
- Discord スレッドへのリンク

### 新規タスク作成（/tasks/new）
- タイトルと説明の入力
- チームの選択
- 優先度の設定
- 期限の設定（カレンダーUI）

### チーム管理（/teams）
- **チーム一覧**
  - 所属するすべてのチームを表示
  - メンバー数の確認
  - Discordサーバーへのリンク
  
- **チーム詳細（/teams/[id]）**
  - タスク統計（未着手・進行中・完了）
  - メンバー一覧と権限表示
  - 管理者機能（管理者のみ）
    - メンバーの権限変更（管理者/メンバー）
    - メンバーの削除
    - 新規メンバーの招待方法の確認

### ユーザープロファイル（/profile）
- **概要タブ**
  - ユーザー情報（アバター、ユーザー名、Discord ID）
  - タスク統計（担当タスク数、ステータス別内訳）
  - 所属チーム一覧と権限
  - 最近のアクティビティ（更新されたタスク）
  
- **担当タスクタブ**
  - 自分に割り当てられたすべてのタスク
  - ステータスでフィルタリング
  - 更新日時・作成日時・期限・優先度でソート
  
- **通知設定タブ**
  - タスク割り当て通知
  - 期限リマインダー（3日前・1日前・当日）
  - 期限切れ通知
  - コメント通知
  - ステータス変更通知
  - チームメンバー追加通知

### 権限について
- **管理者**
  - メンバーの権限変更が可能
  - メンバーの削除が可能
  - チーム設定の変更が可能
  
- **メンバー**
  - タスクの作成・編集・表示が可能
  - コメントの追加が可能
  - 自分のタスクの管理が可能

## 便利な使い方

### Discord スレッドとの連携
タスクを作成すると、指定したDiscordチャンネルに自動的にスレッドが作成されます。スレッド内でのディスカッションがタスクの進行管理に役立ちます。

タスクが完了すると（`/task close`コマンドを実行）、関連するスレッドは自動的にアーカイブされます。これにより、アクティブなタスクのスレッドのみが表示され、チャンネルが整理された状態を維持できます。

### メンション機能
タスクの説明やコメントで`@username`形式でユーザーをメンションすると、該当ユーザーにDMで通知が送信されます。

### 通知機能
以下の場合に自動的に通知が送信されます：
- **タスク割り当て時**: 担当者にDM通知
- **ステータス変更時**: スレッド/チャンネルに通知
- **期限設定時**: 担当者にDM通知
- **コメント追加時**: タスク関係者にDM通知
- **タスク完了時**: スレッド/チャンネルに通知

**注意**: Discordコマンドの処理に時間がかかる場合がありますが、コマンド実行後すぐに「処理中...」の表示が出るので、処理完了までお待ちください。

### リマインダー機能
期限が近づいたタスクについては、毎日午前9時（UTC）に自動的にDiscordでリマインダーが送信されます。
- **期限3日前から2日前**: 事前リマインダー
- **期限1日前（明日が期限）**: 📅 リマインダー通知
- **期限当日**: ⚠️ 緊急リマインダー
- **期限切れ**: 🚨 期限切れ通知

リマインダーは以下の場所に送信されます：
- タスクのスレッドまたはチャンネル
- 担当者へのDM
- タスク作成者へのDM（担当者と異なる場合）

### チーム間でのタスク管理
複数のDiscordサーバーに参加している場合、それぞれのサーバーごとにタスクが管理されます。タスク一覧では所属するすべてのチームのタスクが表示されます。

## トラブルシューティング

### ログインできない場合
1. Discordにログインしていることを確認
2. ブラウザのCookieとキャッシュをクリア
3. 別のブラウザで試す

### Botを追加してもチームが表示されない場合
1. サーバー管理者が `/wumtodo setup` コマンドを実行
2. または、任意のユーザーがタスクコマンド（例: `/task create`）を実行

### スラッシュコマンドが表示されない場合
1. Discordアプリを再起動
2. サーバー管理者に Bot の権限を確認してもらう
3. `/` を入力してコマンドリストを更新
4. 最大1時間待つ（Discordのコマンドキャッシュ更新）

### コマンドがタイムアウトする場合
コマンド実行後、「アプリケーションが応答しませんでした」と表示される場合がありますが、実際にはコマンドは正常に処理されています。これは処理に時間がかかるタスク（特にタスクの作成など）で発生することがあります。

### タスクが表示されない場合
1. 正しいチームに所属していることを確認
2. フィルタリング設定を確認（「すべて」に設定）
3. ページを再読み込み

## サポート
問題が解決しない場合は、Discord サーバーの管理者にお問い合わせください。